<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
{% extends 'base.html' %}
{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

<div class="qna-container my-4">
  <h2 class="h-title">모카클래스 Q&amp;A</h2>

  <table class="table qna-table">
    <thead>
      <tr>
        <th style="width:80px;">번호</th>
        <th>제목</th>
        <th style="width:220px;">작성일시</th>
          <th>답변상태</th>
      </tr>
    </thead>
      <tbody>
     {% for question in question_list.items %}
      <tr>
        <!-- 번호 -->
        <td>{{ loop.index + ((question_list.page-1) * question_list.per_page) }}</td>

        <!-- 제목 -->
        <td>
          <a href="{{ url_for('question.detail', question_id=question.id) }}">
            {{ question.subject }}
          </a>
        </td>

        <!-- 작성일시 -->
        <td>{{ question.create_date|datetime }}</td>

        <!-- 답변상태 -->
        <td>
          {% if question.answer_set|length > 0 %}
            <span class="status-done">답변완료</span>
          {% else %}
            <span class="status-pending">답변대기</span>
          {% endif %}
        </td>
      </tr>
     {% endfor %}
    </tbody>
  </table>
  <!-- 버튼 -->
  <div class="d-flex justify-content-start my-3">
    <a href="{{ url_for('question.create') }}" class="btn btn-orange">
      ✍ 질문 등록하기
    </a>
  </div>
</div>

<!-- 페이징 -->
<div class="paging-fixed">
  <ul class="pagination">
    {% if question_list.has_prev %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('main.index', page=question_list.prev_num) }}">이전</a>
      </li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">이전</span></li>
    {% endif %}

    {% for page_num in question_list.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
      {% if page_num %}
        {% if page_num == question_list.page %}
          <li class="page-item active"><span class="page-link">{{ page_num }}</span></li>
        {% else %}
          <li class="page-item"><a class="page-link" href="{{ url_for('main.index', page=page_num) }}">{{ page_num }}</a></li>
        {% endif %}
      {% else %}
        <li class="page-item disabled"><span class="page-link">…</span></li>
      {% endif %}
    {% endfor %}

    {% if question_list.has_next %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('main.index', page=question_list.next_num) }}">다음</a>
      </li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">다음</span></li>
    {% endif %}
  </ul>
</div>

{% endblock %}
